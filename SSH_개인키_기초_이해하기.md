# π” SSH κ°μΈν‚¤λ€ λ¬΄μ—‡μΈκ°€?

SSH κ°μΈν‚¤λ¥Ό μ΄ν•΄ν•κΈ° μ „μ— κΈ°λ³Έ κ°λ…λ¶€ν„° μ„¤λ…ν•κ² μµλ‹λ‹¤.

---

## π”‘ SSH ν‚¤ μ(Key Pair)μ κ°λ…

SSHλ” **λ‘ κ°μ ν‚¤**λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤:
1. **κ°μΈν‚¤ (Private Key)** - λΉ„λ°€λ²νΈμ²λΌ λ³΄κ΄€
2. **κ³µκ°ν‚¤ (Public Key)** - μ„λ²„μ— λ“±λ΅

μ΄ λ‘ ν‚¤λ” **μ**μ„ μ΄λ£Ήλ‹λ‹¤. ν•λ‚μ κ°μΈν‚¤μ™€ ν•λ‚μ κ³µκ°ν‚¤κ°€ μ„λ΅ μ§μ…λ‹λ‹¤.

---

## π― λΉ„μ λ΅ μ΄ν•΄ν•κΈ°

### μλ¬Όμ‡ μ™€ μ—΄μ‡  λΉ„μ 

- **κ³µκ°ν‚¤** = μλ¬Όμ‡ 
  - μ„λ²„μ— μ„¤μΉ
  - μ—¬λ¬ κ³³μ— μ„¤μΉν•΄λ„ λ¨
  - μ•„λ¬΄λ‚ λ³Ό μ μμ

- **κ°μΈν‚¤** = μ—΄μ‡ 
  - λ‚΄ μ»΄ν“¨ν„°μ—λ§ λ³΄κ΄€
  - μ λ€ λ‹¤λ¥Έ μ‚¬λμ—κ² λ³΄μ—¬μ£Όλ©΄ μ• λ¨
  - μ—΄μ‡ λ΅ μλ¬Όμ‡ λ¥Ό μ—΄ μ μμ

### μ „μμ„λ… λΉ„μ 

- **κ°μΈν‚¤** = λ„μ¥ (λ‚΄κ°€ μ°λ” κ²ƒ)
  - λ‚λ§ κ°€μ§€κ³  μμ
  - λ¬Έμ„μ— λ„μ¥μ„ μ°μ–΄μ„ "λ‚΄κ°€ λ³΄λ‚Έ κ±°μ•Ό" μ¦λ…

- **κ³µκ°ν‚¤** = λ„μ¥ μΈμ¦μ„ (λ„κµ¬λ‚ λ³Ό μ μμ)
  - μ„λ²„μ— λ“±λ΅
  - λ„μ¥μ΄ μ§„μ§μΈμ§€ ν™•μΈν•λ” μ©λ„

---

## π” SSH κ°μΈν‚¤λ€?

### μ •μ

SSH **κ°μΈν‚¤(Private Key)**λ”:
- λ‚΄ μ»΄ν“¨ν„°μ— μ €μ¥λλ” **λΉ„λ°€ νμΌ**
- μ„λ²„μ— λ΅κ·ΈμΈν•  λ• μ‚¬μ©ν•λ” **μΈμ¦μ„**
- **μ λ€ κ³µκ°ν•λ©΄ μ• λλ”** λΉ„λ°€ μ •λ³΄

### μ—­ν• 

1. **μ„λ²„ μΈμ¦**
   - κ°μΈν‚¤λ΅ μ„λ²„μ— μ ‘μ†
   - λΉ„λ°€λ²νΈ μ—†μ΄ λ΅κ·ΈμΈ κ°€λ¥

2. **μ‹ μ› ν™•μΈ**
   - "μ΄ μ‚¬λμ΄ λ§λ‹¤"λ” μ¦λ…
   - GitHub Actionsκ°€ μ„λ²„μ— μ ‘μ†ν•  λ• μ‚¬μ©

3. **λ³΄μ•**
   - λΉ„λ°€λ²νΈλ³΄λ‹¤ λ” μ•μ „
   - μ•”νΈν™”λ ν‚¤ μ‚¬μ©

---

## π“ SSH ν‚¤ νμΌ κµ¬μ΅°

### κ°μΈν‚¤ νμΌ

**μ΄λ¦„ μμ‹:**
- `id_rsa`
- `id_ed25519`
- `deploy_key` (μ§μ ‘ λ§λ“  μ΄λ¦„)

**λ‚΄μ© ν•μ‹:**
```
-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
QyNTUxOQAAACBxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
...
-----END OPENSSH PRIVATE KEY-----
```

**νΉμ§•:**
- `-----BEGIN`μΌλ΅ μ‹μ‘
- `-----END`λ΅ λλ‚¨
- κΈ΄ μ•”νΈν™”λ λ¬Έμμ—΄
- **μ „μ²΄ λ‚΄μ©**μ„ μ‚¬μ©ν•΄μ•Ό ν•¨

### κ³µκ°ν‚¤ νμΌ

**μ΄λ¦„ μμ‹:**
- `id_rsa.pub` (`.pub` ν™•μ¥μ)
- `id_ed25519.pub`
- `deploy_key.pub`

**λ‚΄μ© ν•μ‹:**
```
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIFwbll+D//Sc6TaC+cLPX7PfOA59iDDed/8f9FJpold6 deploy@server
```

**νΉμ§•:**
- ν• μ¤„μ§λ¦¬ μ§§μ€ λ¬Έμμ—΄
- μ„λ²„μ— λ“±λ΅ν•λ” μ©λ„
- κ³µκ°ν•΄λ„ μƒκ΄€μ—†μ

---

## π”„ SSH μΈμ¦ μ‘λ™ μ›λ¦¬

### 1. ν‚¤ μ μƒμ„±

```
κ°μΈν‚¤ μƒμ„±
    β†“
κ³µκ°ν‚¤λ„ ν•¨κ» μƒμ„± (μ)
```

### 2. κ³µκ°ν‚¤λ¥Ό μ„λ²„μ— λ“±λ΅

```
κ³µκ°ν‚¤ β†’ μ„λ²„μ ~/.ssh/authorized_keysμ— μ €μ¥
```

### 3. κ°μΈν‚¤λ΅ μ„λ²„ μ ‘μ†

```
λ‚΄ μ»΄ν“¨ν„°μ κ°μΈν‚¤ β†’ μ„λ²„μ— μ ‘μ† μ‹λ„
    β†“
μ„λ²„κ°€ κ³µκ°ν‚¤λ΅ κ²€μ¦
    β†“
λ§μΌλ©΄ λ΅κ·ΈμΈ μ„±κ³µ!
```

---

## π’΅ μ™ κ°μΈν‚¤κ°€ ν•„μ”ν•κ°€?

### GitHub Actions μλ™ λ°°ν¬ μ‹λ‚λ¦¬μ¤

1. **λ‚΄κ°€ μ½”λ“λ¥Ό ν‘Έμ‹** (`git push`)
2. **GitHub Actionsκ°€ μ‹¤ν–‰λ¨**
3. **μ„λ²„μ— μλ™μΌλ΅ λ°°ν¬ ν•„μ”**
4. **μ„λ²„μ— μ ‘μ†ν•λ ¤λ©΄?** β†’ κ°μΈν‚¤ ν•„μ”!

**νλ¦„:**
```
GitHub Actions
    β†“ (κ°μΈν‚¤ μ‚¬μ©)
λ¦¬λ…μ¤ μ„λ²„ μ ‘μ†
    β†“
λ°°ν¬ μ¤ν¬λ¦½νΈ μ‹¤ν–‰
    β†“
μ½”λ“ λ°°ν¬ μ™„λ£!
```

---

## π“ κ°μΈν‚¤μ μ„μΉ

### Windowsμ—μ„

```
C:\Users\μ‚¬μ©μλ…\.ssh\
```

**νμΌ μ΄λ¦„:**
- `id_rsa` - κ°μΈν‚¤
- `id_rsa.pub` - κ³µκ°ν‚¤
- `id_ed25519` - κ°μΈν‚¤ (μµμ‹ )
- `id_ed25519.pub` - κ³µκ°ν‚¤

### μ‹¤μ  μμ‹

```
C:\Users\hmlee\.ssh\
β”β”€β”€ id_rsa          β† κ°μΈν‚¤ (μ΄κ±Έ μ°Ύμ•„μ•Ό ν•¨!)
β”β”€β”€ id_rsa.pub      β† κ³µκ°ν‚¤
β””β”€β”€ known_hosts     β† μ„λ²„ κ³µκ°ν‚¤ λ©λ΅ (μ΄κ±΄ μ•„λ‹!)
```

---

## π” κ°μΈν‚¤ ν™•μΈν•λ” λ°©λ²•

### 1. νμΌ νƒμƒ‰κΈ°μ—μ„

1. `.ssh` ν΄λ” μ—΄κΈ°
2. **`id_rsa`** λλ” **`id_ed25519`** νμΌ μ°ΎκΈ°
   - ν™•μ¥μ μ—†μ
   - `.pub`μ΄ μ•„λ‹

### 2. PowerShellμ—μ„

```powershell
# .ssh ν΄λ” ν™•μΈ
Get-ChildItem ~\.ssh

# κ°μΈν‚¤ νμΌλ§ μ°ΎκΈ° (κ³µκ°ν‚¤ μ μ™Έ)
Get-ChildItem ~\.ssh | Where-Object { 
    $_.Name -like "id_*" -and $_.Name -notlike "*.pub" 
}
```

---

## β οΈ κ°μΈν‚¤μ™€ κ³µκ°ν‚¤ κµ¬λ¶„ν•κΈ°

| κµ¬λ¶„ | κ°μΈν‚¤ | κ³µκ°ν‚¤ |
|------|--------|--------|
| **νμΌ μ΄λ¦„** | `id_rsa` | `id_rsa.pub` |
| **ν™•μ¥μ** | μ—†μ | `.pub` μμ |
| **μ©λ„** | λ‚΄κ°€ μ‚¬μ© | μ„λ²„μ— λ“±λ΅ |
| **κ³µκ°** | β μ λ€ μ• λ¨! | β… κ³µκ°ν•΄λ„ λ¨ |
| **λ‚΄μ© κΈΈμ΄** | κΈΈλ‹¤ (μ—¬λ¬ μ¤„) | μ§§λ‹¤ (ν• μ¤„) |
| **μ‹μ‘ λ¶€λ¶„** | `-----BEGIN...` | `ssh-rsa` λλ” `ssh-ed25519` |

---

## π€ κ°μΈν‚¤κ°€ μ—†λ” κ²½μ°

κ°μΈν‚¤κ°€ μ—†λ‹¤λ©΄ μƒλ΅ μƒμ„±ν•΄μ•Ό ν•©λ‹λ‹¤.

### μƒμ„± λ…λ Ήμ–΄

```powershell
ssh-keygen -t ed25519 -C "deploy@server" -f deploy_key
```

**μƒμ„±λλ” νμΌ:**
- β… `deploy_key` - κ°μΈν‚¤ (GitHub Secretμ— μ‚¬μ©)
- β… `deploy_key.pub` - κ³µκ°ν‚¤ (μ„λ²„μ— λ“±λ΅)

---

## π“‹ μ”μ•½

### SSH κ°μΈν‚¤λ”:

1. **λΉ„λ°€ νμΌ** - μ λ€ κ³µκ°ν•μ§€ μ•μ
2. **μΈμ¦μ„** - μ„λ²„μ— λ΅κ·ΈμΈν•  λ• μ‚¬μ©
3. **ν‚¤ μμ μΌλ¶€** - κ³µκ°ν‚¤μ™€ μμ„ μ΄λ£Έ
4. **κΈ΄ μ•”νΈ λ¬Έμμ—΄** - `-----BEGIN...`μΌλ΅ μ‹μ‘

### GitHub Secretμ— ν•„μ”ν• κ²ƒ:

- β… **κ°μΈν‚¤ μ „μ²΄ λ‚΄μ©** (`-----BEGIN`λ¶€ν„° `-----END`κΉμ§€)
- β κ³µκ°ν‚¤ μ•„λ‹
- β known_hosts μ•„λ‹
- β μΌλ¶€λ§ μ•„λ‹ (μ „μ²΄ ν•„μ”)

---

## π” λ³΄μ• μ£Όμμ‚¬ν•­

### κ°μΈν‚¤λ”:

1. **μ λ€ κ³µκ°ν•μ§€ λ§μ„Έμ”**
   - GitHubμ— μ§μ ‘ μ¬λ¦¬μ§€ λ§μ„Έμ”
   - λ‹¤λ¥Έ μ‚¬λμ—κ² λ³΄λ‚΄μ§€ λ§μ„Έμ”
   - κ³µκ° μ €μ¥μ†μ— μ»¤λ°‹ν•μ§€ λ§μ„Έμ”

2. **μ•μ „ν•κ² λ³΄κ΄€**
   - λΉ„λ°€λ²νΈ κ΄€λ¦¬μμ— μ €μ¥
   - μ ‘κ·Ό κ¶ν• μ ν•

3. **GitHub Secretsλ§ μ‚¬μ©**
   - μ½”λ“μ—λ” μ λ€ λ„£μ§€ λ§μ„Έμ”
   - GitHub Secretsμ—λ§ μ €μ¥

---

## β… λ‹¤μ λ‹¨κ³„

μ΄μ  SSH κ°μΈν‚¤λ¥Ό μ΄ν•΄ν–μΌλ‹:

1. **κ°μΈν‚¤ νμΌ μ°ΎκΈ°** - `.ssh` ν΄λ”μ—μ„ `id_rsa` λλ” `id_ed25519` μ°ΎκΈ°
2. **μ—†μΌλ©΄ μƒμ„±** - `ssh-keygen` λ…λ Ήμ–΄λ΅ μƒμ„±
3. **μ „μ²΄ λ‚΄μ© λ³µμ‚¬** - `-----BEGIN`λ¶€ν„° `-----END`κΉμ§€
4. **GitHub Secretμ— λ“±λ΅** - `DEPLOY_KEY`μ— λ¶™μ—¬λ„£κΈ°

---

**μ΄μ  `.ssh` ν΄λ”μ—μ„ `id_rsa` λλ” `id_ed25519` νμΌμ„ μ°Ύμ•„λ³΄μ„Έμ”!** π”
