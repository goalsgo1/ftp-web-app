# Firebase ê³¼ê¸ˆ ë°©ì§€ ì„¤ì • ê°€ì´ë“œ

> **ì‘ì„±ì¼**: 2025-01-XX  
> **í”„ë¡œì íŠ¸**: PushHub (í‘¸ì‹œ ì•Œë¦¼ ëŒ€ì‹œë³´ë“œ)

---

## ğŸ›¡ï¸ Firebase ê³¼ê¸ˆ ë°©ì§€ ë°©ë²•

Firebaseì—ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ê³¼ê¸ˆì„ ë°©ì§€í•˜ê¸° ìœ„í•œ ì„¤ì • ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

---

## 1. ë¬´ë£Œ í”Œëœ (Spark Plan) ìœ ì§€

### âœ… ê°€ì¥ ì¤‘ìš”í•œ ì„¤ì •

**Spark Plan (ë¬´ë£Œ í”Œëœ)ì€ ë¬´ë£Œ í•œë„ë¥¼ ì´ˆê³¼í•´ë„ ìë™ìœ¼ë¡œ ìœ ë£Œ í”Œëœìœ¼ë¡œ ì „í™˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

- ë¬´ë£Œ í•œë„ ì´ˆê³¼ ì‹œ: **ì„œë¹„ìŠ¤ê°€ ì¤‘ë‹¨ë˜ê±°ë‚˜ ì œí•œë©ë‹ˆë‹¤**
- ìœ ë£Œ í”Œëœ(Blaze Plan)ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ì§€ ì•Šìœ¼ë©´ **ê³¼ê¸ˆì´ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**

### í™•ì¸ ë°©ë²•

1. Firebase Console ì ‘ì†
2. ì¢Œì¸¡ ë©”ë‰´ â†’ **"ì‚¬ìš©ëŸ‰ ë° ì²­êµ¬"** í´ë¦­
3. í˜„ì¬ í”Œëœ í™•ì¸: **"Spark Plan"** í‘œì‹œ í™•ì¸

---

## 2. ì˜ˆì‚° ì•Œë¦¼ ì„¤ì • (Blaze Plan ì‚¬ìš© ì‹œ)

ë§Œì•½ Blaze Planì„ ì‚¬ìš© ì¤‘ì´ê±°ë‚˜ í–¥í›„ ì—…ê·¸ë ˆì´ë“œí•  ê³„íšì´ ìˆë‹¤ë©´, ì˜ˆì‚° ì œí•œì„ ì„¤ì •í•˜ì„¸ìš”.

### ì„¤ì • ë°©ë²•

1. **Firebase Console** ì ‘ì†
2. ì¢Œì¸¡ ë©”ë‰´ â†’ **"ì‚¬ìš©ëŸ‰ ë° ì²­êµ¬"** í´ë¦­
3. **"ì˜ˆì‚° ë° ì•Œë¦¼"** íƒ­ ì„ íƒ
4. **"ì˜ˆì‚° ì¶”ê°€"** ë²„íŠ¼ í´ë¦­
5. ë‹¤ìŒ ì„¤ì • ì…ë ¥:
   - **ì˜ˆì‚° ê¸ˆì•¡**: ì›í•˜ëŠ” ìµœëŒ€ ê¸ˆì•¡ ì„¤ì • (ì˜ˆ: $5, $10)
   - **ì•Œë¦¼ ì„ê³„ê°’**: 50%, 90%, 100% ë“±
   - **ì•Œë¦¼ ì´ë©”ì¼**: ë³¸ì¸ ì´ë©”ì¼ ì£¼ì†Œ
6. **"ì €ì¥"** í´ë¦­

### ì˜ˆì‚° ì œí•œ ì„¤ì • (ì¤‘ìš”!)

**ì£¼ì˜**: FirebaseëŠ” ì˜ˆì‚° ì œí•œì„ ì´ˆê³¼í•´ë„ ì„œë¹„ìŠ¤ë¥¼ ìë™ìœ¼ë¡œ ì¤‘ë‹¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  
ì˜ˆì‚° ì•Œë¦¼ë§Œ ë°›ì„ ìˆ˜ ìˆìœ¼ë©°, ìˆ˜ë™ìœ¼ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì¤‘ë‹¨í•´ì•¼ í•©ë‹ˆë‹¤.

---

## 3. ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§ ì„¤ì •

### ì¼ì¼ ì‚¬ìš©ëŸ‰ í™•ì¸

1. Firebase Console â†’ **"ì‚¬ìš©ëŸ‰ ë° ì²­êµ¬"** â†’ **"ì‚¬ìš©ëŸ‰"** íƒ­
2. ì¼ì¼ ì‚¬ìš©ëŸ‰ ì¶”ì´ í™•ì¸:
   - Firestore ì½ê¸°: 50,000íšŒ/ì¼ í•œë„
   - Firestore ì“°ê¸°: 20,000íšŒ/ì¼ í•œë„
   - Firestore ì‚­ì œ: 20,000íšŒ/ì¼ í•œë„
   - Firestore ì €ì¥: 1GB í•œë„

### ì•Œë¦¼ ì„¤ì •

1. **"ì‚¬ìš©ëŸ‰ ë° ì²­êµ¬"** â†’ **"ì•Œë¦¼"** íƒ­
2. **"ì•Œë¦¼ ì¶”ê°€"** í´ë¦­
3. ë‹¤ìŒ ì„¤ì •:
   - **ì•Œë¦¼ ìœ í˜•**: ì‚¬ìš©ëŸ‰ ì„ê³„ê°’
   - **ì„ê³„ê°’**: 80%, 90% ë“± (ë¬´ë£Œ í•œë„ ì´ˆê³¼ ì „ ê²½ê³ )
   - **ì´ë©”ì¼**: ì•Œë¦¼ ë°›ì„ ì´ë©”ì¼ ì£¼ì†Œ

---

## 4. ì½”ë“œ ë ˆë²¨ ìµœì í™”

### ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ ìµœì í™”

ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ(`onSnapshot`)ëŠ” ë³€ê²½ë  ë•Œë§ˆë‹¤ ì½ê¸° ì‘ì—…ìœ¼ë¡œ ì¹´ìš´íŠ¸ë©ë‹ˆë‹¤.

**ìµœì í™” ë°©ë²•:**

```typescript
// âŒ ë‚˜ìœ ì˜ˆ: ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ êµ¬ë… í•´ì œ ì•ˆ í•¨
useEffect(() => {
  const unsubscribe = subscribeUserSubscriptions(userId, (subscriptions) => {
    setSubscriptions(subscriptions);
  });
  // unsubscribe í˜¸ì¶œ ëˆ„ë½!
}, [userId]);

// âœ… ì¢‹ì€ ì˜ˆ: ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ êµ¬ë… í•´ì œ
useEffect(() => {
  const unsubscribe = subscribeUserSubscriptions(userId, (subscriptions) => {
    setSubscriptions(subscriptions);
  });
  
  return () => {
    unsubscribe(); // êµ¬ë… í•´ì œ
  };
}, [userId]);
```

### ë¶ˆí•„ìš”í•œ ì½ê¸° ìµœì†Œí™”

**ìµœì í™” ë°©ë²•:**

```typescript
// âŒ ë‚˜ìœ ì˜ˆ: ë§¤ë²ˆ ì „ì²´ ëª©ë¡ ì¡°íšŒ
const fetchData = async () => {
  const allFeatures = await getFeatures(); // ì „ì²´ ì¡°íšŒ
  const filtered = allFeatures.filter(f => f.status === 'completed');
};

// âœ… ì¢‹ì€ ì˜ˆ: í•„í„°ë§ëœ ì¿¼ë¦¬ ì‚¬ìš©
const fetchData = async () => {
  const q = query(
    collection(db, 'features'),
    where('status', '==', 'completed')
  );
  const snapshot = await getDocs(q);
};
```

### ìºì‹± í™œìš©

í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ ë°ì´í„°ë¥¼ ìºì‹±í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì½ê¸° ì‘ì—…ì„ ì¤„ì…ë‹ˆë‹¤.

```typescript
// ìºì‹± ì˜ˆì‹œ
const [cachedFeatures, setCachedFeatures] = useState<Feature[]>([]);
const [lastFetch, setLastFetch] = useState<Date | null>(null);

const getFeaturesWithCache = async () => {
  // 5ë¶„ ì´ë‚´ì— ì¡°íšŒí•œ ê²½ìš° ìºì‹œ ì‚¬ìš©
  if (lastFetch && Date.now() - lastFetch.getTime() < 5 * 60 * 1000) {
    return cachedFeatures;
  }
  
  const features = await getFeatures();
  setCachedFeatures(features);
  setLastFetch(new Date());
  return features;
};
```

---

## 5. Firestore ë³´ì•ˆ ê·œì¹™ ìµœì í™”

ë³´ì•ˆ ê·œì¹™ì„ ìµœì í™”í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì½ê¸° ì‘ì—…ì„ ë°©ì§€í•©ë‹ˆë‹¤.

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // ì‚¬ìš©ìë³„ ë°ì´í„° ì ‘ê·¼ ì œí•œ
    match /userSettings/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    
    // ê¸°ëŠ¥ ë°ì´í„°ëŠ” ì¸ì¦ëœ ì‚¬ìš©ìë§Œ ì½ê¸° ê°€ëŠ¥
    match /features/{featureId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && 
        (request.resource.data.createdBy == request.auth.uid || 
         !exists(/databases/$(database)/documents/features/$(featureId)));
    }
  }
}
```

---

## 6. ë¬´ë£Œ í•œë„ ì´ˆê³¼ ì‹œ ëŒ€ì‘ ë°©ë²•

### Spark Plan (ë¬´ë£Œ í”Œëœ) ì‚¬ìš© ì‹œ

ë¬´ë£Œ í•œë„ë¥¼ ì´ˆê³¼í•˜ë©´:
- **ì„œë¹„ìŠ¤ê°€ ì œí•œë˜ê±°ë‚˜ ì¤‘ë‹¨ë©ë‹ˆë‹¤**
- **ê³¼ê¸ˆì€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤** (Blaze Planìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ì§€ ì•ŠëŠ” í•œ)

### ëŒ€ì‘ ë°©ë²•

1. **ì‚¬ìš©ëŸ‰ í™•ì¸**: Firebase Consoleì—ì„œ ì–´ë–¤ ì‘ì—…ì´ ë§ì€ì§€ í™•ì¸
2. **ì½”ë“œ ìµœì í™”**: ë¶ˆí•„ìš”í•œ ì½ê¸°/ì“°ê¸° ì‘ì—… ì œê±°
3. **ìºì‹± í™œìš©**: í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìºì‹±ìœ¼ë¡œ ì½ê¸° íšŸìˆ˜ ê°ì†Œ
4. **ë°ì´í„° ì •ë¦¬**: ë¶ˆí•„ìš”í•œ ë°ì´í„° ì‚­ì œ

---

## 7. ì²´í¬ë¦¬ìŠ¤íŠ¸

### âœ… ê³¼ê¸ˆ ë°©ì§€ ì„¤ì • ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] **Spark Plan (ë¬´ë£Œ í”Œëœ) í™•ì¸**: Firebase Consoleì—ì„œ í”Œëœ í™•ì¸
- [ ] **Blaze Plan ì—…ê·¸ë ˆì´ë“œ ì•ˆ í•¨**: ìœ ë£Œ í”Œëœìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•˜ì§€ ì•ŠìŒ
- [ ] **ì‚¬ìš©ëŸ‰ ëª¨ë‹ˆí„°ë§**: ì¼ì¼ ì‚¬ìš©ëŸ‰ í™•ì¸ ìŠµê´€í™”
- [ ] **ì•Œë¦¼ ì„¤ì •**: ë¬´ë£Œ í•œë„ 80%, 90% ë„ë‹¬ ì‹œ ì•Œë¦¼ ë°›ê¸°
- [ ] **ì½”ë“œ ìµœì í™”**: ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ êµ¬ë… í•´ì œ í™•ì¸
- [ ] **ë¶ˆí•„ìš”í•œ ì½ê¸° ì œê±°**: ì¿¼ë¦¬ ìµœì í™” ë° ìºì‹± í™œìš©
- [ ] **ë°ì´í„° ì •ë¦¬**: ì˜¤ë˜ëœ ë¡œê·¸ë‚˜ ë¶ˆí•„ìš”í•œ ë°ì´í„° ì •ê¸°ì  ì‚­ì œ

---

## 8. ì˜ˆìƒ ë¹„ìš©

### Spark Plan (ë¬´ë£Œ í”Œëœ) ì‚¬ìš© ì‹œ

- **ê³¼ê¸ˆ ì—†ìŒ** âœ…
- ë¬´ë£Œ í•œë„ ë‚´ì—ì„œ ì‚¬ìš©
- í•œë„ ì´ˆê³¼ ì‹œ ì„œë¹„ìŠ¤ ì œí•œ (ê³¼ê¸ˆ ì—†ìŒ)

### Blaze Plan ì‚¬ìš© ì‹œ (ì°¸ê³ )

- **ë¬´ë£Œ í•œë„**: Spark Planê³¼ ë™ì¼
- **ì´ˆê³¼ë¶„ ê³¼ê¸ˆ**:
  - Firestore ì½ê¸°: $0.06 / 100,000íšŒ
  - Firestore ì“°ê¸°: $0.18 / 100,000íšŒ
  - Firestore ì €ì¥: $0.18 / GB/ì›”

**ì˜ˆì‹œ ê³„ì‚°:**
- ì¼ì¼ ì½ê¸° 100,000íšŒ ì´ˆê³¼ ì‹œ: (100,000 - 50,000) Ã— $0.06 / 100,000 = **$0.03/ì¼**
- ì¼ì¼ ì“°ê¸° 30,000íšŒ ì´ˆê³¼ ì‹œ: (30,000 - 20,000) Ã— $0.18 / 100,000 = **$0.018/ì¼**

---

## 9. ì£¼ì˜ì‚¬í•­

### âš ï¸ ì¤‘ìš”í•œ ì£¼ì˜ì‚¬í•­

1. **Blaze Plan ì—…ê·¸ë ˆì´ë“œ ì‹œ**: ì˜ˆì‚° ì œí•œì„ ì„¤ì •í•´ë„ ìë™ìœ¼ë¡œ ì„œë¹„ìŠ¤ê°€ ì¤‘ë‹¨ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
2. **ë¬´ë£Œ í•œë„ ì´ˆê³¼**: Spark Planì—ì„œ í•œë„ ì´ˆê³¼ ì‹œ ì„œë¹„ìŠ¤ê°€ ì œí•œë˜ì§€ë§Œ ê³¼ê¸ˆì€ ì—†ìŠµë‹ˆë‹¤
3. **ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ**: ë³€ê²½ë  ë•Œë§ˆë‹¤ ì½ê¸° ì‘ì—…ìœ¼ë¡œ ì¹´ìš´íŠ¸ë˜ë¯€ë¡œ ì£¼ì˜ í•„ìš”
4. **ì •ê¸° ëª¨ë‹ˆí„°ë§**: ì¼ì¼ ì‚¬ìš©ëŸ‰ì„ ì •ê¸°ì ìœ¼ë¡œ í™•ì¸í•˜ëŠ” ìŠµê´€ í•„ìš”

---

## 10. ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Firebase ê°€ê²© ì •ì±…](https://firebase.google.com/pricing)
- [Firestore ë¬´ë£Œ í”Œëœ í•œë„](https://firebase.google.com/docs/firestore/quotas)
- [Firebase ì˜ˆì‚° ë° ì•Œë¦¼ ì„¤ì •](https://firebase.google.com/docs/projects/billing/avoid-surprise-bills)

---

**âœ… ê³¼ê¸ˆ ë°©ì§€ ì„¤ì • ì™„ë£Œ!**

ì´ ê°€ì´ë“œë¥¼ ë”°ë¼ ì„¤ì •í•˜ë©´ ì˜ˆìƒì¹˜ ëª»í•œ Firebase ê³¼ê¸ˆì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

