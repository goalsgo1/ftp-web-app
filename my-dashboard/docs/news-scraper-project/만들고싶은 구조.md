ì—ì´ì „íŠ¸ê°€ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë§Œë“¤ê³  ì‹¤í–‰í•˜ëŠ” ê²ƒ ìì²´ê°€ API í˜¸ì¶œì´ë¯€ë¡œ, ìŠ¤í¬ë¦½íŠ¸ ì•ˆì— ë˜ APIë¥¼ ë„£ì„ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤!

ğŸ¤” ë‘ ê°€ì§€ íŒ¨í„´ ë¹„êµ
âŒ ì˜ëª»ëœ ì´í•´ (ë¶ˆí•„ìš”í•œ ì¤‘ë³µ)
ì—ì´ì „íŠ¸ (API í˜¸ì¶œ)
    â†“
ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± (API í˜¸ì¶œ)
    â†“
ìŠ¤í¬ë¦½íŠ¸ ì•ˆì— ë˜ API í˜¸ì¶œ â† ë¶ˆí•„ìš”!
    â†“
ì‹¤í–‰
âœ… ì˜¬ë°”ë¥¸ ì´í•´
ì—ì´ì „íŠ¸ (API í˜¸ì¶œ)
    â†“
"ì¼ë°˜ Python ìŠ¤í¬ë¦½íŠ¸" ì‘ì„± (API ì—†ìŒ!)
    â†“
ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (íŒŒì¼ ì½ê¸°/ì“°ê¸° ë“±)
    â†“
ê²°ê³¼ í™•ì¸
    â†“
ì—ì´ì „íŠ¸ (API í˜¸ì¶œ) - ë‹¤ì‹œ íŒë‹¨
    â†“
ë‹¤ìŒ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
    â†“
ë°˜ë³µ...

ğŸ’¡ ì˜¬ë°”ë¥¸ ì‚¬ìš© íŒ¨í„´
íŒ¨í„´ 1: ì—ì´ì „íŠ¸ê°€ ëª¨ë“  ë³€í™˜ì„ ì§ì ‘ ìˆ˜í–‰
python# autonomous_converter.py
import anthropic
import os
from pathlib import Path

class AutonomousConverter:
    """
    ì—ì´ì „íŠ¸ê°€ ì§ì ‘ ëª¨ë“  íŒŒì¼ì„ ë³€í™˜
    ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¨ìˆœ ìœ í‹¸ë¦¬í‹°ë¡œë§Œ ì‚¬ìš©
    """
    
    def __init__(self, api_key: str):
        self.client = anthropic.Anthropic(api_key=api_key)
        self.conversation = []
    
    def run(self, goal: str):
        """ì™„ì „ ììœ¨ ëª¨ë“œ"""
        
        self.conversation.append({
            "role": "user",
            "content": f"""
ëª©í‘œ: {goal}

ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬:
1. read_file(path) - íŒŒì¼ ì½ê¸°
2. write_file(path, content) - íŒŒì¼ ì“°ê¸°
3. list_files(directory) - íŒŒì¼ ëª©ë¡
4. execute_command(cmd) - ì‰˜ ëª…ë ¹ ì‹¤í–‰

ìŠ¤ìŠ¤ë¡œ ê³„íší•˜ê³  ì‹¤í–‰í•˜ì„¸ìš”.
"""
        })
        
        iteration = 0
        max_iterations = 20
        
        while iteration < max_iterations:
            iteration += 1
            print(f"\nğŸ”„ ë°˜ë³µ {iteration}")
            
            # ì—ì´ì „íŠ¸ì—ê²Œ ë‹¤ìŒ í–‰ë™ ì§ˆë¬¸
            response = self.client.messages.create(
                model="claude-sonnet-4-20250514",
                max_tokens=4000,
                messages=self.conversation,
                tools=[
                    {
                        "name": "read_file",
                        "description": "íŒŒì¼ ë‚´ìš© ì½ê¸°",
                        "input_schema": {
                            "type": "object",
                            "properties": {
                                "path": {"type": "string"}
                            }
                        }
                    },
                    {
                        "name": "write_file",
                        "description": "íŒŒì¼ ì“°ê¸°",
                        "input_schema": {
                            "type": "object",
                            "properties": {
                                "path": {"type": "string"},
                                "content": {"type": "string"}
                            }
                        }
                    },
                    {
                        "name": "list_files",
                        "description": "ë””ë ‰í† ë¦¬ íŒŒì¼ ëª©ë¡",
                        "input_schema": {
                            "type": "object",
                            "properties": {
                                "directory": {"type": "string"}
                            }
                        }
                    }
                ]
            )
            
            # ì—ì´ì „íŠ¸ê°€ ë„êµ¬ë¥¼ ì‚¬ìš©í–ˆëŠ”ì§€ í™•ì¸
            if response.stop_reason == "end_turn":
                # ì‘ì—… ì™„ë£Œ
                final_message = response.content[0].text if response.content else ""
                print(f"âœ… ì™„ë£Œ: {final_message}")
                break
            
            # ë„êµ¬ ì‚¬ìš© ì²˜ë¦¬
            self.conversation.append({
                "role": "assistant",
                "content": response.content
            })
            
            tool_results = []
            
            for content in response.content:
                if content.type == "tool_use":
                    print(f"ğŸ”§ ë„êµ¬: {content.name}")
                    print(f"   ì…ë ¥: {content.input}")
                    
                    # ë„êµ¬ ì‹¤í–‰
                    result = self._execute_tool(content.name, content.input)
                    print(f"   ê²°ê³¼: {result[:100]}...")
                    
                    tool_results.append({
                        "type": "tool_result",
                        "tool_use_id": content.id,
                        "content": result
                    })
            
            # ë„êµ¬ ê²°ê³¼ë¥¼ ì—ì´ì „íŠ¸ì—ê²Œ ë‹¤ì‹œ ì „ë‹¬
            self.conversation.append({
                "role": "user",
                "content": tool_results
            })
        
        print(f"\nì´ ë°˜ë³µ: {iteration}íšŒ")
    
    def _execute_tool(self, tool_name: str, tool_input: dict) -> str:
        """ë„êµ¬ ì‹¤í–‰ (ì‹¤ì œ íŒŒì¼ ì‘ì—…)"""
        
        try:
            if tool_name == "read_file":
                path = Path(tool_input["path"])
                return path.read_text()
            
            elif tool_name == "write_file":
                path = Path(tool_input["path"])
                path.parent.mkdir(parents=True, exist_ok=True)
                path.write_text(tool_input["content"])
                return f"âœ“ íŒŒì¼ ì €ì¥: {path}"
            
            elif tool_name == "list_files":
                directory = Path(tool_input["directory"])
                files = [str(f.relative_to(directory)) for f in directory.rglob("*") if f.is_file()]
                return "\n".join(files[:50])  # ìµœëŒ€ 50ê°œ
            
            return "ë„êµ¬ ì‹¤í–‰ ì™„ë£Œ"
            
        except Exception as e:
            return f"ì˜¤ë¥˜: {e}"


# ì‹¤í–‰
if __name__ == "__main__":
    agent = AutonomousConverter(api_key=os.environ["ANTHROPIC_API_KEY"])
    
    agent.run("""
    React í”„ë¡œì íŠ¸(./my-react-app)ë¥¼ Flutterë¡œ ë³€í™˜í•˜ì„¸ìš”.
    
    ì‘ì—…:
    1. React íŒŒì¼ë“¤ ì°¾ê¸°
    2. ê° íŒŒì¼ì„ Flutterë¡œ ë³€í™˜
    3. ./flutter-appì— ì €ì¥
    4. ë³€í™˜ ë¦¬í¬íŠ¸ ì‘ì„±
    """)
```

**ì‹¤í–‰ ê³¼ì •:**
```
ğŸ”„ ë°˜ë³µ 1
ğŸ”§ ë„êµ¬: list_files
   ì…ë ¥: {'directory': './my-react-app'}
   ê²°ê³¼: src/App.jsx, src/components/Button.jsx...

ğŸ”„ ë°˜ë³µ 2
ğŸ”§ ë„êµ¬: read_file
   ì…ë ¥: {'path': './my-react-app/src/App.jsx'}
   ê²°ê³¼: import React from 'react'...

ğŸ”„ ë°˜ë³µ 3
ğŸ’­ ì—ì´ì „íŠ¸: "ì´ React ì»´í¬ë„ŒíŠ¸ë¥¼ Flutterë¡œ ë³€í™˜í•˜ê² ìŠµë‹ˆë‹¤"
ğŸ”§ ë„êµ¬: write_file
   ì…ë ¥: {'path': './flutter-app/lib/app.dart', 'content': 'import ...'}
   ê²°ê³¼: âœ“ íŒŒì¼ ì €ì¥

ğŸ”„ ë°˜ë³µ 4
ğŸ”§ ë„êµ¬: read_file
   ì…ë ¥: {'path': './my-react-app/src/components/Button.jsx'}
   
ğŸ”„ ë°˜ë³µ 5
ğŸ”§ ë„êµ¬: write_file
   ì…ë ¥: {'path': './flutter-app/lib/widgets/button.dart', ...}
   
...ê³„ì† ë°˜ë³µ...

âœ… ì™„ë£Œ: ëª¨ë“  íŒŒì¼ì„ ì„±ê³µì ìœ¼ë¡œ ë³€í™˜í–ˆìŠµë‹ˆë‹¤.

íŒ¨í„´ 2: ì—ì´ì „íŠ¸ê°€ ìœ í‹¸ë¦¬í‹° ìŠ¤í¬ë¦½íŠ¸ ì‘ì„± â†’ ì‹¤í–‰ â†’ ë°˜ë³µ
python# script_generating_agent.py
import anthropic
import os
import subprocess
from pathlib import Path

class ScriptGeneratingAgent:
    """
    ì—ì´ì „íŠ¸ê°€ í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰
    APIëŠ” ìŠ¤í¬ë¦½íŠ¸ì— ì—†ê³ , ì—ì´ì „íŠ¸ë§Œ API ì‚¬ìš©
    """
    
    def __init__(self, api_key: str):
        self.client = anthropic.Anthropic(api_key=api_key)
        self.conversation = []
        self.workspace = Path("./agent_workspace")
        self.workspace.mkdir(exist_ok=True)
    
    def run(self, goal: str):
        """ììœ¨ ì—ì´ì „íŠ¸ ì‹¤í–‰"""
        
        self.conversation.append({
            "role": "user",
            "content": f"""
ëª©í‘œ: {goal}

ë‹¹ì‹ ì€ ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ Python ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì‚¬ìš© ê°€ëŠ¥í•œ ë„êµ¬:
1. create_script(filename, code) - Python ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
2. run_script(filename) - ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
3. read_file(path) - íŒŒì¼ ì½ê¸°

ì „ëµ:
1. í•„ìš”í•œ ì‘ì—… ë¶„ì„
2. ì‘ì—…ì„ ìˆ˜í–‰í•  ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
3. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
4. ê²°ê³¼ í™•ì¸
5. í•„ìš”í•˜ë©´ ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
6. ë°˜ë³µ

ì‹œì‘í•˜ì„¸ìš”!
"""
        })
        
        for iteration in range(1, 21):
            print(f"\n{'='*60}")
            print(f"ğŸ”„ ë°˜ë³µ {iteration}")
            print("="*60)
            
            response = self.client.messages.create(
                model="claude-sonnet-4-20250514",
                max_tokens=6000,
                messages=self.conversation,
                tools=[
                    {
                        "name": "create_script",
                        "description": "Python ìŠ¤í¬ë¦½íŠ¸ íŒŒì¼ ìƒì„±",
                        "input_schema": {
                            "type": "object",
                            "properties": {
                                "filename": {"type": "string"},
                                "code": {"type": "string", "description": "Python ì½”ë“œ"}
                            }
                        }
                    },
                    {
                        "name": "run_script",
                        "description": "Python ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰",
                        "input_schema": {
                            "type": "object",
                            "properties": {
                                "filename": {"type": "string"}
                            }
                        }
                    },
                    {
                        "name": "read_file",
                        "description": "íŒŒì¼ ë‚´ìš© ì½ê¸°",
                        "input_schema": {
                            "type": "object",
                            "properties": {
                                "path": {"type": "string"}
                            }
                        }
                    }
                ]
            )
            
            # ì™„ë£Œ ì²´í¬
            if response.stop_reason == "end_turn":
                print("\nâœ… ì—ì´ì „íŠ¸ ì‘ì—… ì™„ë£Œ")
                if response.content:
                    print(response.content[0].text)
                break
            
            # ëŒ€í™” ê¸°ë¡
            self.conversation.append({
                "role": "assistant",
                "content": response.content
            })
            
            # ë„êµ¬ ì‹¤í–‰
            tool_results = []
            
            for content in response.content:
                if content.type == "text":
                    print(f"\nğŸ’­ {content.text[:300]}...")
                
                elif content.type == "tool_use":
                    print(f"\nğŸ”§ ë„êµ¬: {content.name}")
                    
                    result = self._execute_tool(content.name, content.input)
                    print(f"ê²°ê³¼: {result[:200]}...")