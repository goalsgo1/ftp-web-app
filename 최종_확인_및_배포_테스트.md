# âœ… ìµœì¢… í™•ì¸ ë° ë°°í¬ í…ŒìŠ¤íŠ¸

GitHub Secretsê°€ ëª¨ë‘ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ì´ì œ ìµœì¢… í™•ì¸ í›„ ë°°í¬ë¥¼ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## âœ… ì™„ë£Œëœ ì‘ì—… (ìµœì¢…)

### 1. ë¡œì»¬ Git ì„¤ì • âœ…
- [x] Git ì €ì¥ì†Œ ì´ˆê¸°í™”
- [x] ì²« ë²ˆì§¸ ì»¤ë°‹
- [x] GitHub ì €ì¥ì†Œ ìƒì„± ë° ì—°ê²°
- [x] ì½”ë“œ í‘¸ì‹œ ì™„ë£Œ

### 2. GitHub ì¸ì¦ âœ…
- [x] Personal Access Token ìƒì„±
- [x] GitHub ì¸ì¦ ì™„ë£Œ

### 3. GitHub Secrets âœ…
- [x] `DEPLOY_KEY` ì¶”ê°€ ì™„ë£Œ
- [x] `DEPLOY_HOST` ì¶”ê°€ ì™„ë£Œ
- [x] `DEPLOY_USER` ì¶”ê°€ ì™„ë£Œ

### 4. ì„œë²„ ì¤€ë¹„ âœ… (ê±°ì˜ ì™„ë£Œ)
- [x] ë°°í¬ ì‚¬ìš©ì ìƒì„± (`deploy`)
- [x] Git ì €ì¥ì†Œ í´ë¡  ì™„ë£Œ
- [x] ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
- [ ] ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„± í™•ì¸ í•„ìš”
- [ ] SSH ê³µê°œí‚¤ ë“±ë¡ í•„ìš”
- [ ] Nginx ì„¤ì • ìˆ˜ì • í•„ìš”

---

## ğŸ” ìµœì¢… í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### GitHub Secrets í™•ì¸

1. **GitHub ì €ì¥ì†Œ ì ‘ì†**
   - https://github.com/goalsgo1/ftp-web-app/settings/secrets/actions

2. **3ê°œ Secret ëª¨ë‘ ìˆëŠ”ì§€ í™•ì¸:**
   - âœ… `DEPLOY_KEY`
   - âœ… `DEPLOY_HOST`
   - âœ… `DEPLOY_USER`

### ì„œë²„ ì„¤ì • í™•ì¸

**ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ ì‹¤í–‰:**

```bash
# 1. ë°°í¬ ë””ë ‰í† ë¦¬ êµ¬ì¡° í™•ì¸
ls -la /var/www/myapp/

# 2. Git ì €ì¥ì†Œ í™•ì¸
ls -la /var/www/myapp/repo/

# 3. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
ls -la /var/www/myapp/deploy.sh

# 4. ì‹¬ë³¼ë¦­ ë§í¬ í™•ì¸
ls -la /var/www/myapp/current

# 5. public ë””ë ‰í† ë¦¬ í™•ì¸
ls -la /var/www/myapp/repo/public/
```

---

## â­ï¸ ë‚¨ì€ ì‘ì—…

### 1. ì„œë²„ ì„¤ì • ì™„ë£Œ

#### A. ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„± (ì•„ì§ ì•ˆ í–ˆë‹¤ë©´)

```bash
sudo -u deploy ln -s /var/www/myapp/repo/public /var/www/myapp/current
```

#### B. SSH ê³µê°œí‚¤ ë“±ë¡

**ìœˆë„ìš°ì—ì„œ:**
```powershell
# ê³µê°œí‚¤ ë³µì‚¬
Get-Content deploy_key.pub | clip
```

**ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ:**
```bash
sudo mkdir -p /home/deploy/.ssh
sudo chmod 700 /home/deploy/.ssh
sudo nano /home/deploy/.ssh/authorized_keys
# ê³µê°œí‚¤ ë¶™ì—¬ë„£ê¸° (Ctrl+Shift+V)
sudo chown -R deploy:deploy /home/deploy/.ssh
sudo chmod 600 /home/deploy/.ssh/authorized_keys
```

#### C. Nginx ì„¤ì • ìˆ˜ì •

```bash
# Nginx ì„¤ì • íŒŒì¼ í¸ì§‘
sudo nano /etc/nginx/sites-available/default
```

**ë³€ê²½í•  ë‚´ìš©:**
```nginx
server {
    listen 80;
    server_name _;
    root /var/www/myapp/current/public;  # ì´ ì¤„ ë³€ê²½
    index index.php index.html;
    
    location / {
        try_files $uri $uri/ =404;
    }
    
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
    }
}
```

**ì„¤ì • í…ŒìŠ¤íŠ¸ ë° ì¬ì‹œì‘:**
```bash
sudo nginx -t
sudo systemctl reload nginx
```

---

## ğŸš€ ë°°í¬ í…ŒìŠ¤íŠ¸

### Step 1: ì‘ì€ ë³€ê²½ì‚¬í•­ ì¶”ê°€

**ìœˆë„ìš° PowerShellì—ì„œ:**

```powershell
cd C:\FTP

# íŒŒì¼ ìˆ˜ì • (ì˜ˆ: index.html ì œëª© ë³€ê²½)
# ë˜ëŠ” ê°„ë‹¨í•œ ë³€ê²½ì‚¬í•­

# ë³€ê²½ì‚¬í•­ ì»¤ë°‹
git add .
git commit -m "Test: ìë™ ë°°í¬ í™•ì¸"

# í‘¸ì‹œ
git push origin main
```

### Step 2: GitHub Actions í™•ì¸

1. **GitHub Actions í˜ì´ì§€ ì ‘ì†**
   - https://github.com/goalsgo1/ftp-web-app/actions

2. **ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ í™•ì¸**
   - ìµœì‹  ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ í´ë¦­
   - ê° ë‹¨ê³„ë³„ ë¡œê·¸ í™•ì¸
   - ì„±ê³µ/ì‹¤íŒ¨ ì—¬ë¶€ í™•ì¸

### Step 3: ì„œë²„ì—ì„œ í™•ì¸

**ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ:**

```bash
# ë¦´ë¦¬ì¦ˆ ë””ë ‰í† ë¦¬ í™•ì¸
ls -la /var/www/myapp/releases/

# í˜„ì¬ ì‹¬ë³¼ë¦­ ë§í¬ í™•ì¸
ls -la /var/www/myapp/current

# ë°°í¬ëœ íŒŒì¼ í™•ì¸
ls -la /var/www/myapp/current/public/
```

### Step 4: ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸

- ì„œë²„ IP ì£¼ì†Œë¡œ ì ‘ì†
- ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë˜ì—ˆëŠ”ì§€ í™•ì¸

---

## ğŸ“Š ì§„í–‰ë¥  (ìµœì¢…)

| ë‹¨ê³„ | ìƒíƒœ | ì§„í–‰ë¥  |
|------|------|--------|
| ë¡œì»¬ Git ì„¤ì • | âœ… ì™„ë£Œ | 100% |
| GitHub ì €ì¥ì†Œ | âœ… ì™„ë£Œ | 100% |
| GitHub ì¸ì¦ | âœ… ì™„ë£Œ | 100% |
| GitHub Secrets | âœ… ì™„ë£Œ | 100% |
| ì„œë²„ ì¤€ë¹„ | âš ï¸ ê±°ì˜ ì™„ë£Œ | 80% |
| ìë™ ë°°í¬ í…ŒìŠ¤íŠ¸ | âŒ ë¯¸ì™„ë£Œ | 0% |

**ì „ì²´ ì§„í–‰ë¥ : ì•½ 80%**

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

### GitHub
- [x] Secrets 3ê°œ ëª¨ë‘ ì¶”ê°€
- [x] ì›Œí¬í”Œë¡œìš° íŒŒì¼ ì¡´ì¬ (`.github/workflows/deploy.yml`)

### ì„œë²„
- [x] ë°°í¬ ì‚¬ìš©ì ìƒì„±
- [x] Git ì €ì¥ì†Œ í´ë¡ 
- [x] ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì¤€ë¹„
- [ ] ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„± í™•ì¸
- [ ] SSH ê³µê°œí‚¤ ë“±ë¡
- [ ] Nginx ì„¤ì • ìˆ˜ì •

### ë°°í¬ í…ŒìŠ¤íŠ¸
- [ ] ì½”ë“œ í‘¸ì‹œ
- [ ] GitHub Actions ì‹¤í–‰ í™•ì¸
- [ ] ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸

---

## ğŸ¯ ì§€ê¸ˆ ë°”ë¡œ í•  ì¼

### 1. ì„œë²„ ì„¤ì • ì™„ë£Œ (15ë¶„)

```bash
# ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„± (í™•ì¸)
sudo -u deploy ln -s /var/www/myapp/repo/public /var/www/myapp/current

# SSH ê³µê°œí‚¤ ë“±ë¡ (ìœ„ì˜ ë°©ë²• ì°¸ê³ )

# Nginx ì„¤ì • ìˆ˜ì • (ìœ„ì˜ ë°©ë²• ì°¸ê³ )
```

### 2. ë°°í¬ í…ŒìŠ¤íŠ¸ (5ë¶„)

```powershell
# ìœˆë„ìš° PowerShell
cd C:\FTP
git add .
git commit -m "Test: ìë™ ë°°í¬ í™•ì¸"
git push origin main
```

### 3. ê²°ê³¼ í™•ì¸

- GitHub Actions í™•ì¸
- ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸

---

## ğŸ†˜ ë¬¸ì œ í•´ê²°

### GitHub Actionsê°€ ì‹¤íŒ¨í•´ìš”

**í™•ì¸ ì‚¬í•­:**
1. Secretsê°€ ëª¨ë‘ ë“±ë¡ë˜ì—ˆëŠ”ì§€
2. ì„œë²„ IP ì£¼ì†Œê°€ ë§ëŠ”ì§€
3. SSH ê³µê°œí‚¤ê°€ ì„œë²„ì— ë“±ë¡ë˜ì—ˆëŠ”ì§€
4. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œê°€ ë§ëŠ”ì§€

### ì›¹ í˜ì´ì§€ê°€ ì•ˆ ì—´ë ¤ìš”

**í™•ì¸ ì‚¬í•­:**
1. Nginx ì„¤ì •ì´ ì˜¬ë°”ë¥¸ì§€
2. ì‹¬ë³¼ë¦­ ë§í¬ê°€ ìƒì„±ë˜ì—ˆëŠ”ì§€
3. íŒŒì¼ ê¶Œí•œì´ ì˜¬ë°”ë¥¸ì§€

---

## ğŸ’¡ ì„±ê³µ í™•ì¸ ë°©ë²•

### 1. GitHub Actions ì„±ê³µ

```
âœ… ëª¨ë“  ë‹¨ê³„ê°€ ì´ˆë¡ìƒ‰ ì²´í¬ í‘œì‹œ
âœ… "Deploy to Production Server" ì™„ë£Œ
```

### 2. ì„œë²„ì—ì„œ í™•ì¸

```bash
# ìƒˆ ë¦´ë¦¬ì¦ˆ ìƒì„± í™•ì¸
ls -lt /var/www/myapp/releases/ | head -5

# í˜„ì¬ ë§í¬ í™•ì¸
ls -la /var/www/myapp/current
```

### 3. ì›¹ ë¸Œë¼ìš°ì €

- ì„œë²„ IPë¡œ ì ‘ì†
- ë©”ì¸ í˜ì´ì§€ê°€ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë¨
- ë³€ê²½ì‚¬í•­ì´ ë°˜ì˜ë¨

---

**ê±°ì˜ ë‹¤ ëë‚¬ìŠµë‹ˆë‹¤! ì„œë²„ ì„¤ì •ë§Œ ì™„ë£Œí•˜ë©´ ìë™ ë°°í¬ê°€ ì‘ë™í•©ë‹ˆë‹¤!** ğŸš€
