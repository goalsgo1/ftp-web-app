# âš¡ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ - 5ë¶„ ì•ˆì— ì‹œì‘í•˜ê¸°

ì´ ê°€ì´ë“œëŠ” ê°€ì¥ ë¹ ë¥´ê²Œ Git ê¸°ë°˜ ìë™ ë°°í¬ë¥¼ ì„¤ì •í•˜ëŠ” ë°©ë²•ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.

## ğŸ“‹ ì „ì œ ì¡°ê±´ ì²´í¬

- [ ] Windows PC (ë¡œì»¬ ê°œë°œ í™˜ê²½)
- [ ] ë¦¬ëˆ…ìŠ¤ ì›¹ ì„œë²„ (ë°°í¬ ëŒ€ìƒ)
- [ ] GitHub ê³„ì • (ë¬´ë£Œ ê³„ì • ê°€ëŠ¥)
- [ ] ì„œë²„ì— SSH ì ‘ì† ê°€ëŠ¥

---

## ğŸš€ 5ë‹¨ê³„ë¡œ ì‹œì‘í•˜ê¸°

### 1ë‹¨ê³„: Git ì„¤ì¹˜ (2ë¶„)

**Windowsì—ì„œ:**

1. https://git-scm.com/download/win ì ‘ì†
2. ë‹¤ìš´ë¡œë“œ í›„ ì„¤ì¹˜ (ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ì§„í–‰)
3. PowerShellì—ì„œ í™•ì¸:
   ```powershell
   git --version
   ```

**Git ì‚¬ìš©ì ì •ë³´ ì„¤ì •:**
```powershell
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

---

### 2ë‹¨ê³„: í”„ë¡œì íŠ¸ ì¤€ë¹„ (1ë¶„)

**PowerShellì—ì„œ ì‹¤í–‰:**

ë°©ë²• 1: ì‹¤í–‰ ì •ì±… ìš°íšŒ (ê¶Œì¥)
```powershell
cd C:\FTP
powershell -ExecutionPolicy Bypass -File .\ë°°í¬_ì‹œì‘í•˜ê¸°.ps1
```

ë°©ë²• 2: ë°°ì¹˜ íŒŒì¼ ì‚¬ìš© (ë” ì‰¬ì›€)
```cmd
cd C:\FTP
ë°°í¬_ì‹œì‘í•˜ê¸°_ì•ˆì „ì‹¤í–‰.bat
```

ë°©ë²• 3: í˜„ì¬ ì„¸ì…˜ì—ë§Œ ì •ì±… ë³€ê²½
```powershell
cd C:\FTP
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process
.\ë°°í¬_ì‹œì‘í•˜ê¸°.ps1
```

ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ ë‹¤ìŒì„ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤:
- í”„ë¡œì íŠ¸ êµ¬ì¡° ìƒì„±
- Git ì €ì¥ì†Œ ì´ˆê¸°í™”
- í•„ìš”í•œ ë””ë ‰í† ë¦¬ ìƒì„±

---

### 3ë‹¨ê³„: GitHub ì €ì¥ì†Œ ìƒì„± ë° ì—°ê²° (1ë¶„)

1. **GitHubì—ì„œ ì €ì¥ì†Œ ìƒì„±:**
   - https://github.com ì ‘ì†
   - ìš°ì¸¡ ìƒë‹¨ `+` â†’ `New repository`
   - ì €ì¥ì†Œ ì´ë¦„ ì…ë ¥ (ì˜ˆ: `ftp-web-app`)
   - `Create repository` í´ë¦­

2. **ë¡œì»¬ ì €ì¥ì†Œ ì—°ê²°:**
   ```powershell
   git remote add origin https://github.com/ì‚¬ìš©ìëª…/ì €ì¥ì†Œëª….git
   
   git add .
   git commit -m "Initial commit"
   git push -u origin main
   ```

---

### 4ë‹¨ê³„: ì„œë²„ ì¤€ë¹„ (5ë¶„)

**ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ ì‹¤í–‰:**

```bash
# 1. ë°°í¬ ì‚¬ìš©ì ìƒì„±
sudo adduser deploy
sudo usermod -aG sudo deploy

# 2. ë°°í¬ ë””ë ‰í† ë¦¬ ìƒì„±
sudo mkdir -p /var/www/myapp/{releases,shared,repo}
sudo chown -R deploy:deploy /var/www/myapp

# 3. Git ì„¤ì¹˜
sudo apt update && sudo apt install git -y

# 4. ì €ì¥ì†Œ í´ë¡ 
sudo -u deploy git clone https://github.com/ì‚¬ìš©ìëª…/ì €ì¥ì†Œëª….git /var/www/myapp/repo

# 5. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬ ë° ê¶Œí•œ ì„¤ì •
sudo cp /var/www/myapp/repo/deploy/deploy.sh /var/www/myapp/
sudo chmod +x /var/www/myapp/deploy.sh
sudo chown deploy:deploy /var/www/myapp/deploy.sh

# 6. ì´ˆê¸° ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±
sudo -u deploy ln -s /var/www/myapp/repo/public /var/www/myapp/current
```

**Nginx ì„¤ì • ìˆ˜ì •:**
```bash
sudo nano /etc/nginx/sites-available/default
```

ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •:
```nginx
server {
    listen 80;
    server_name _;
    root /var/www/myapp/current/public;  # ì´ ì¤„ ë³€ê²½
    index index.php index.html;
    # ... ë‚˜ë¨¸ì§€ ì„¤ì •
}
```

```bash
sudo nginx -t
sudo systemctl reload nginx
```

---

### 5ë‹¨ê³„: GitHub Actions ì„¤ì • (3ë¶„)

1. **SSH í‚¤ ìƒì„± (Windowsì—ì„œ):**
   ```powershell
   ssh-keygen -t ed25519 -f deploy_key -C "deploy@server"
   # ë¹„ë°€ë²ˆí˜¸ ì—†ì´ ì—”í„° ë‘ ë²ˆ
   ```

2. **ì„œë²„ì— ê³µê°œí‚¤ ë“±ë¡ (ë¦¬ëˆ…ìŠ¤ì—ì„œ):**
   ```bash
   sudo mkdir -p /home/deploy/.ssh
   sudo chmod 700 /home/deploy/.ssh
   
   # Windowsì—ì„œ deploy_key.pub ë‚´ìš© ë³µì‚¬ í›„
   sudo nano /home/deploy/.ssh/authorized_keys
   # ê³µê°œí‚¤ ë¶™ì—¬ë„£ê¸°
   
   sudo chown -R deploy:deploy /home/deploy/.ssh
   sudo chmod 600 /home/deploy/.ssh/authorized_keys
   ```

3. **GitHub Secrets ë“±ë¡:**
   - GitHub ì €ì¥ì†Œ â†’ `Settings` â†’ `Secrets and variables` â†’ `Actions`
   - `New repository secret` í´ë¦­
   - ë‹¤ìŒ 3ê°œ ì¶”ê°€:

   | ì´ë¦„ | ê°’ | ì„¤ëª… |
   |------|-----|------|
   | `DEPLOY_HOST` | `192.168.1.100` | ì„œë²„ IP ì£¼ì†Œ |
   | `DEPLOY_USER` | `deploy` | ë°°í¬ ì‚¬ìš©ìëª… |
   | `DEPLOY_KEY` | `deploy_key` íŒŒì¼ ë‚´ìš© ì „ì²´ | SSH ê°œì¸í‚¤ |

   **SSH ê°œì¸í‚¤ ë³µì‚¬ (Windows PowerShell):**
   ```powershell
   Get-Content deploy_key | clip
   # GitHub Secretsì˜ DEPLOY_KEYì— ë¶™ì—¬ë„£ê¸°
   ```

4. **ì›Œí¬í”Œë¡œìš° íŒŒì¼ ì»¤ë°‹ ë° í‘¸ì‹œ:**
   ```powershell
   git add .github/workflows/deploy.yml
   git commit -m "Add CI/CD pipeline"
   git push origin main
   ```

---

## âœ… í…ŒìŠ¤íŠ¸

### ìë™ ë°°í¬ í…ŒìŠ¤íŠ¸

1. **íŒŒì¼ ìˆ˜ì •:**
   ```powershell
   # index.html íŒŒì¼ ì—´ì–´ì„œ ì œëª© ë³€ê²½
   ```

2. **ì»¤ë°‹ ë° í‘¸ì‹œ:**
   ```powershell
   git add .
   git commit -m "Test: ìë™ ë°°í¬ í™•ì¸"
   git push origin main
   ```

3. **í™•ì¸:**
   - GitHub â†’ ì €ì¥ì†Œ â†’ `Actions` íƒ­
   - ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ìƒíƒœ í™•ì¸
   - ì„œë²„ì—ì„œ ì›¹ í˜ì´ì§€ ì ‘ì†í•˜ì—¬ ë³€ê²½ì‚¬í•­ í™•ì¸

---

## ğŸ†˜ ë¬¸ì œ í•´ê²°

### Git ì„¤ì¹˜ ì•ˆ ë¨
- https://git-scm.com/download/win ì—ì„œ ë‹¤ìš´ë¡œë“œ

### SSH ì—°ê²° ì•ˆ ë¨
- ì„œë²„ IP, ì‚¬ìš©ìëª…, SSH í‚¤ í™•ì¸
- `ssh -i deploy_key deploy@ì„œë²„IP` ë¡œ ì§ì ‘ í…ŒìŠ¤íŠ¸

### ë°°í¬ ì‹¤íŒ¨
- GitHub Actions ë¡œê·¸ í™•ì¸
- ì„œë²„ì—ì„œ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ë™ ì‹¤í–‰: `cd /var/www/myapp && ./deploy.sh`

### Nginx 502 ì˜¤ë¥˜
- PHP-FPM ìƒíƒœ í™•ì¸: `sudo systemctl status php8.1-fpm`
- ì‹¬ë³¼ë¦­ ë§í¬ í™•ì¸: `ls -la /var/www/myapp/current`

---

## ğŸ“š ë” ì•Œì•„ë³´ê¸°

- **ìƒì„¸ ê°€ì´ë“œ**: [ë‹¨ê³„ë³„_ë°°í¬_ê°€ì´ë“œ.md](./ë‹¨ê³„ë³„_ë°°í¬_ê°€ì´ë“œ.md)
- **ìˆ˜ë™ ë°°í¬**: [deploy/manual_deploy.sh](./deploy/manual_deploy.sh) ì‚¬ìš©

---

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

1. âœ… CSS/JS íŒŒì¼ ë¶„ë¦¬ (ì¸ë¼ì¸ ì½”ë“œë¥¼ ë³„ë„ íŒŒì¼ë¡œ)
2. âœ… í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬ (`.env` íŒŒì¼)
3. âœ… ìë™ í…ŒìŠ¤íŠ¸ ì¶”ê°€
4. âœ… ë°°í¬ ì•Œë¦¼ ì„¤ì • (Slack/Discord)

---

**â±ï¸ ì˜ˆìƒ ì†Œìš” ì‹œê°„: ì•½ 15ë¶„**

**ğŸ’¡ íŒ**: ê° ë‹¨ê³„ë¥¼ ì™„ë£Œí•  ë•Œë§ˆë‹¤ ì²´í¬ë°•ìŠ¤ë¥¼ ì²´í¬í•˜ì„¸ìš”!
