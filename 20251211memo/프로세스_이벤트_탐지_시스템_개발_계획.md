# 프로세스 이벤트 탐지 시스템 개발 계획

> 대표님께 들은 요구사항을 바탕으로 정리한 프로세스 모니터링 및 이벤트 탐지 시스템 개발 계획서

---

## 📋 프로젝트 개요

시스템의 프로세스를 지속적으로 모니터링하고, 이벤트 발생 전후의 상태 변화를 비교 분석하여 문제가 되는 프로세스를 탐지하는 유틸리티 프로그램 개발

---

## 🎯 핵심 요구사항

### 1. 프로세스 모니터링 및 변경사항 추적
- **목적**: 시스템의 모든 프로세스를 지속적으로 감지하고 추적
- **기능**:
  - 프로세스 생성/종료/변경 실시간 감지
  - 프로세스별 리소스 사용량 추적 (CPU, 메모리, 네트워크 등)
  - 프로세스 상태 변화 이력 기록

### 2. 이벤트 발생 전후 비교 분석
- **목적**: 특정 이벤트가 발생한 시점을 기준으로 전후 상태를 비교
- **기능**:
  - 이벤트 발생 시점 정확히 기록
  - 이벤트 발생 전 시스템 상태 스냅샷 저장
  - 이벤트 발생 후 시스템 상태 스냅샷 저장
  - 전후 상태 차이점 분석 및 시각화

### 3. 안정화값(Baseline) 계산
- **목적**: 정상적인 시스템 상태를 기준값으로 설정
- **기능**:
  - 과거 시스템 상태 데이터 수집
    - 1일 전 상태
    - 3일 전 상태
    - 7일 전 상태
  - 각 시점별 평균값 계산
  - 평균값을 안정화값(Baseline)으로 설정
  - 프로세스별, 리소스별 안정화값 관리

### 4. 이상 프로세스 탐지
- **목적**: 문제가 발생한 프로세스를 자동으로 식별
- **탐지 조건**:
  - 특정 프로세스의 리소스 사용량이 안정화값 대비 급증
  - 프로세스가 비정상적으로 생성/종료됨
  - 프로세스 동작 패턴이 평소와 다름
- **분석 방법**:
  - 현재 상태 vs 안정화값 비교
  - 이벤트 발생 전 상태 vs 발생 후 상태 비교
  - 프로세스별 변화율 계산

### 5. 프로세스 간 영향 관계 분석
- **목적**: 어떤 프로세스가 다른 프로세스에 영향을 미치는지 파악
- **탐지 시나리오**:
  - 프로세스 A가 문제 발생 → 프로세스 B가 과부하 발생
  - 프로세스 A가 문제 발생 → 프로세스 B가 종료됨
  - 프로세스 A가 문제 발생 → 여러 프로세스에 연쇄 영향
- **분석 방법**:
  - 프로세스 간 의존성 관계 추적
  - 시간 순서에 따른 영향 관계 분석
  - 리소스 경합 상황 분석

### 6. 사용자 인터페이스 요구사항
- **핵심 원칙**: **사용자들이 보기에 제일 편안해야 하며 사용하기 편해야 함**
- **UI 구성 요소**:
  - **타임라인 뷰**:
    - 수평선(타임라인) 표시
    - 이벤트 발생 시점을 타임라인 위에 마커로 표시
    - 이벤트 전후 상태를 시각적으로 비교 가능하도록 배치
  - **비교 뷰**:
    - 이벤트 발생 전 상태 (왼쪽 또는 상단)
    - 이벤트 발생 시점 (중앙, 강조 표시)
    - 이벤트 발생 후 상태 (오른쪽 또는 하단)
  - **프로세스 상세 뷰**:
    - 문제가 된 프로세스 강조 표시
    - 프로세스별 리소스 사용량 차트
    - 프로세스 간 영향 관계 다이어그램

---

## 🔧 기술적 구현 방향

### 데이터 수집 계층
- [ ] 프로세스 모니터링 에이전트 개발
  - OS별 프로세스 정보 수집 (Windows/Linux)
  - 주기적 스냅샷 생성 (예: 1분 간격)
  - 이벤트 발생 시 즉시 스냅샷 생성
- [ ] 데이터 저장소 설계
  - 시계열 데이터베이스 고려 (InfluxDB, TimescaleDB 등)
  - 프로세스 스냅샷 저장 구조 설계
  - 인덱싱 전략 수립 (시간, 프로세스 ID 등)

### 데이터 처리 계층
- [ ] 안정화값 계산 엔진
  - 1일/3일/7일 전 데이터 조회
  - 평균값 계산 알고리즘 구현
  - 가중 평균 고려 (최근 데이터에 더 높은 가중치)
- [ ] 이벤트 탐지 엔진
  - 이상 패턴 감지 알고리즘
  - 임계값 기반 탐지
  - 머신러닝 기반 이상 탐지 고려 (선택사항)
- [ ] 영향 관계 분석 엔진
  - 프로세스 간 의존성 그래프 구축
  - 시간 순서 분석 알고리즘
  - 인과관계 추론 로직

### 프레젠테이션 계층
- [ ] 타임라인 컴포넌트 개발
  - 수평 타임라인 UI
  - 이벤트 마커 표시
  - 줌 인/아웃 기능
  - 시간 범위 선택 기능
- [ ] 비교 뷰 컴포넌트 개발
  - 전후 상태 나란히 표시
  - 차이점 하이라이트
  - 프로세스별 변화량 표시
- [ ] 대시보드 개발
  - 실시간 모니터링 뷰
  - 이벤트 히스토리 뷰
  - 프로세스 상세 분석 뷰

---

## 📊 데이터 모델 설계 (초안)

### 프로세스 스냅샷
```json
{
  "timestamp": "2025-12-11T10:30:00Z",
  "processes": [
    {
      "pid": 1234,
      "name": "chrome.exe",
      "cpu_usage": 15.5,
      "memory_usage": 1024.5,
      "network_in": 100.2,
      "network_out": 50.3,
      "status": "running",
      "parent_pid": 1000
    }
  ],
  "system_metrics": {
    "total_cpu": 45.2,
    "total_memory": 8192.0,
    "memory_used": 4096.0
  }
}
```

### 안정화값 (Baseline)
```json
{
  "process_name": "chrome.exe",
  "baseline_date": "2025-12-11",
  "metrics": {
    "cpu_usage": {
      "1day_avg": 12.3,
      "3day_avg": 11.8,
      "7day_avg": 11.5,
      "baseline": 11.9
    },
    "memory_usage": {
      "1day_avg": 950.2,
      "3day_avg": 920.5,
      "7day_avg": 900.0,
      "baseline": 923.6
    }
  }
}
```

### 이벤트
```json
{
  "event_id": "evt_20251211_103000",
  "timestamp": "2025-12-11T10:30:00Z",
  "event_type": "process_anomaly",
  "trigger_process": {
    "pid": 5678,
    "name": "suspicious.exe"
  },
  "before_snapshot_id": "snap_20251211_102900",
  "after_snapshot_id": "snap_20251211_103100",
  "affected_processes": [
    {
      "pid": 1234,
      "name": "chrome.exe",
      "impact": "high_cpu_usage",
      "change_rate": 150.5
    }
  ]
}
```

---

## 🎨 UI/UX 설계 방향

### 메인 화면 구성
1. **상단**: 타임라인 뷰
   - 수평 스크롤 가능한 타임라인
   - 이벤트 마커 클릭 시 상세 정보 표시
   - 시간 범위 선택 슬라이더

2. **중앙**: 비교 뷰
   - 선택한 이벤트의 전후 상태 비교
   - 프로세스 목록 (변화량 순 정렬)
   - 차트 및 그래프로 시각화

3. **하단**: 상세 정보 패널
   - 선택한 프로세스의 상세 정보
   - 영향 관계 다이어그램
   - 리소스 사용량 추이

### 사용성 고려사항
- **직관적인 네비게이션**: 복잡한 기능도 쉽게 접근 가능
- **시각적 피드백**: 중요한 정보는 색상, 크기로 강조
- **반응형 디자인**: 다양한 화면 크기 지원
- **빠른 로딩**: 대용량 데이터도 효율적으로 표시
- **필터링 및 검색**: 원하는 정보를 빠르게 찾을 수 있도록

---

## 📝 개발 단계별 계획

### Phase 1: 데이터 수집 및 저장 (2-3주)
- [ ] 프로세스 모니터링 에이전트 개발
- [ ] 데이터베이스 스키마 설계 및 구현
- [ ] 데이터 수집 파이프라인 구축
- [ ] 기본 스냅샷 저장 기능 구현

### Phase 2: 안정화값 계산 (1-2주)
- [ ] 과거 데이터 조회 기능
- [ ] 평균값 계산 로직 구현
- [ ] 안정화값 저장 및 관리
- [ ] 주기적 갱신 스케줄러 구현

### Phase 3: 이벤트 탐지 엔진 (2-3주)
- [ ] 이상 패턴 감지 알고리즘 개발
- [ ] 임계값 설정 및 관리
- [ ] 이벤트 생성 및 저장
- [ ] 알림 기능 구현 (선택사항)

### Phase 4: 영향 관계 분석 (2-3주)
- [ ] 프로세스 의존성 추적 로직
- [ ] 시간 순서 분석 알고리즘
- [ ] 영향 관계 그래프 생성
- [ ] 인과관계 추론 로직

### Phase 5: UI 개발 (3-4주)
- [ ] 타임라인 컴포넌트 개발
- [ ] 비교 뷰 컴포넌트 개발
- [ ] 프로세스 상세 뷰 개발
- [ ] 대시보드 통합
- [ ] 반응형 디자인 적용

### Phase 6: 통합 및 테스트 (2주)
- [ ] 전체 시스템 통합
- [ ] 성능 최적화
- [ ] 사용자 테스트
- [ ] 버그 수정 및 개선

---

## 🔍 추가 고려사항

### 성능 최적화
- 대용량 시계열 데이터 처리
- 실시간 모니터링 시 리소스 사용량 최소화
- 효율적인 데이터 압축 및 보관 정책

### 확장성
- 다중 서버 모니터링 지원
- 분산 환경에서의 데이터 수집
- 수평 확장 가능한 아키텍처

### 보안
- 모니터링 데이터의 보안
- 접근 권한 관리
- 민감 정보 마스킹

### 운영
- 로그 관리 및 모니터링
- 알림 시스템
- 백업 및 복구 전략

---

## 📌 다음 주 확인 사항

다음 주에 이 문서를 읽고 다음을 확인해야 함:

1. **요구사항 재확인**
   - [ ] 대표님께 추가 확인이 필요한 사항 정리
   - [ ] 기술적 제약사항 확인
   - [ ] 우선순위 재조정

2. **기술 스택 결정**
   - [ ] 백엔드 프레임워크 선택
   - [ ] 데이터베이스 선택
   - [ ] 프론트엔드 프레임워크 선택
   - [ ] 모니터링 라이브러리 선택

3. **프로젝트 킥오프 준비**
   - [ ] 개발 환경 설정
   - [ ] 프로젝트 구조 설계
   - [ ] 초기 프로토타입 계획

4. **팀 구성 및 역할 분담**
   - [ ] 필요한 인력 확인
   - [ ] 역할 분담 계획

---

## 💡 참고 사항

- 이 문서는 대표님께 들은 요구사항을 바탕으로 작성되었습니다
- 실제 개발 시 추가 요구사항이나 변경사항이 있을 수 있습니다
- 각 단계별로 상세 설계 문서를 별도로 작성할 예정입니다
- 사용자 피드백을 지속적으로 반영하여 개선할 예정입니다

---

**작성일**: 2025-12-11  
**작성자**: [작성자명]  
**프로젝트**: 프로세스 이벤트 탐지 시스템  
**상태**: 요구사항 정리 완료, 개발 계획 수립 필요

