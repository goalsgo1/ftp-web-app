# âœ… ì„œë²„ ì„¤ì • ì™„ë£Œ í™•ì¸

í™”ë©´ì„ ë³´ë‹ˆ ì„œë²„ ì„¤ì •ì´ ì˜ ë˜ì–´ ìˆìŠµë‹ˆë‹¤! í™•ì¸ ê²°ê³¼ì™€ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

---

## âœ… í™•ì¸ëœ ì‚¬í•­

### 1. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ âœ…
```
-rwxr-xr-x 1 root root 5965 Nov 28 13:43 /var/www/myapp/deploy.sh
```
- âœ… íŒŒì¼ ì¡´ì¬
- âœ… ì‹¤í–‰ ê¶Œí•œ ìˆìŒ (`-rwxr-xr-x`)
- âš ï¸ ì†Œìœ ìê°€ `root` (ë‚˜ì¤‘ì— `deploy`ë¡œ ë³€ê²½ ê¶Œì¥)

### 2. ì‹¬ë³¼ë¦­ ë§í¬ âœ…
```
lrwxrwxrwx 1 deploy deploy 26 Nov 28 13:45 /var/www/myapp/current -> /var/www/myapp/repo/public
```
- âœ… ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±ë¨
- âœ… ì˜¬ë°”ë¥¸ ê²½ë¡œë¥¼ ê°€ë¦¬í‚´ (`/var/www/myapp/repo/public`)
- âœ… ì†Œìœ ì: `deploy:deploy`

### 3. ì›¹ íŒŒì¼ë“¤ âœ…
```
/var/www/myapp/repo/public/
â”œâ”€â”€ index.html
â”œâ”€â”€ world_time.html
â”œâ”€â”€ disk_info.php
â””â”€â”€ gallery.php
```
- âœ… ëª¨ë“  ì›¹ íŒŒì¼ ì¡´ì¬
- âœ… ì†Œìœ ì: `deploy:deploy`
- âœ… ê¶Œí•œ ì˜¬ë°”ë¦„

---

## ğŸ” ì¶”ê°€ í™•ì¸ ì‚¬í•­

### 1. ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì†Œìœ ì ë³€ê²½ (ì„ íƒì‚¬í•­)

í˜„ì¬ `deploy.sh`ê°€ `root` ì†Œìœ ì¸ë°, `deploy` ì‚¬ìš©ìê°€ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤:

```bash
sudo chown deploy:deploy /var/www/myapp/deploy.sh
```

### 2. ë””ë ‰í† ë¦¬ êµ¬ì¡° í™•ì¸

```bash
# ì „ì²´ êµ¬ì¡° í™•ì¸
ls -la /var/www/myapp/

# ì˜ˆìƒ ê²°ê³¼:
# deploy.sh
# current -> /var/www/myapp/repo/public (ì‹¬ë³¼ë¦­ ë§í¬)
# releases/
# shared/
# repo/
```

### 3. Nginx ì„¤ì • í™•ì¸

```bash
# Nginx ì„¤ì • í™•ì¸
sudo cat /etc/nginx/sites-available/default | grep root

# ì˜ˆìƒ ê²°ê³¼:
# root /var/www/myapp/current/public;
```

---

## â­ï¸ ë‹¤ìŒ ë‹¨ê³„

### 1. Nginx ì„¤ì • ìˆ˜ì • (í•„ìš”ì‹œ)

ì•„ì§ Nginx ì„¤ì •ì„ ìˆ˜ì •í•˜ì§€ ì•Šì•˜ë‹¤ë©´:

```bash
# Nginx ì„¤ì • íŒŒì¼ í¸ì§‘
sudo nano /etc/nginx/sites-available/default
```

**ë³€ê²½í•  ë‚´ìš©:**
```nginx
server {
    listen 80;
    server_name _;
    root /var/www/myapp/current/public;  # ì´ ì¤„ ë³€ê²½
    index index.php index.html;
    
    location / {
        try_files $uri $uri/ =404;
    }
    
    location ~ \.php$ {
        include snippets/fastcgi-php.conf;
        fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
    }
}
```

**ì„¤ì • í…ŒìŠ¤íŠ¸ ë° ì¬ì‹œì‘:**
```bash
sudo nginx -t
sudo systemctl reload nginx
```

### 2. SSH ê³µê°œí‚¤ ë“±ë¡ (GitHub Actionsìš©)

**ìœˆë„ìš°ì—ì„œ:**
```powershell
# ê³µê°œí‚¤ ë³µì‚¬
Get-Content deploy_key.pub | clip
```

**ë¦¬ëˆ…ìŠ¤ ì„œë²„ì—ì„œ:**
```bash
sudo mkdir -p /home/deploy/.ssh
sudo chmod 700 /home/deploy/.ssh
sudo nano /home/deploy/.ssh/authorized_keys
# ê³µê°œí‚¤ ë¶™ì—¬ë„£ê¸° (Ctrl+Shift+V)
sudo chown -R deploy:deploy /home/deploy/.ssh
sudo chmod 600 /home/deploy/.ssh/authorized_keys
```

### 3. ë°°í¬ í…ŒìŠ¤íŠ¸

**ìœˆë„ìš° PowerShellì—ì„œ:**
```powershell
cd C:\FTP

# ì‘ì€ ë³€ê²½ì‚¬í•­ ì¶”ê°€ (ì˜ˆ: index.html ìˆ˜ì •)
git add .
git commit -m "Test: ìë™ ë°°í¬ í™•ì¸"
git push origin main
```

**GitHub Actions í™•ì¸:**
- https://github.com/goalsgo1/ftp-web-app/actions
- ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ ìƒíƒœ í™•ì¸

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ì„œë²„ ì„¤ì •
- [x] ë°°í¬ ì‚¬ìš©ì ìƒì„±
- [x] Git ì €ì¥ì†Œ í´ë¡ 
- [x] ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì¤€ë¹„
- [x] ì‹¬ë³¼ë¦­ ë§í¬ ìƒì„±
- [ ] ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì†Œìœ ì ë³€ê²½ (ì„ íƒ)
- [ ] Nginx ì„¤ì • ìˆ˜ì •
- [ ] SSH ê³µê°œí‚¤ ë“±ë¡

### GitHub
- [x] Secrets 3ê°œ ëª¨ë‘ ì¶”ê°€
- [x] ì›Œí¬í”Œë¡œìš° íŒŒì¼ ì¡´ì¬

### ë°°í¬ í…ŒìŠ¤íŠ¸
- [ ] ì½”ë“œ í‘¸ì‹œ
- [ ] GitHub Actions ì‹¤í–‰ í™•ì¸
- [ ] ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸

---

## ğŸš€ ë¹ ë¥¸ ë°°í¬ í…ŒìŠ¤íŠ¸

ëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ë©´:

### 1. ì½”ë“œ í‘¸ì‹œ

```powershell
# ìœˆë„ìš° PowerShell
cd C:\FTP
git add .
git commit -m "Test: ìë™ ë°°í¬ í™•ì¸"
git push origin main
```

### 2. GitHub Actions í™•ì¸

1. https://github.com/goalsgo1/ftp-web-app/actions ì ‘ì†
2. ìµœì‹  ì›Œí¬í”Œë¡œìš° ì‹¤í–‰ í™•ì¸
3. ë¡œê·¸ í™•ì¸

### 3. ì„œë²„ í™•ì¸

```bash
# ìƒˆ ë¦´ë¦¬ì¦ˆ ìƒì„± í™•ì¸
ls -lt /var/www/myapp/releases/ | head -5

# í˜„ì¬ ë§í¬ í™•ì¸
ls -la /var/www/myapp/current
```

### 4. ì›¹ ë¸Œë¼ìš°ì € í™•ì¸

- ì„œë²„ IP ì£¼ì†Œë¡œ ì ‘ì†
- ë©”ì¸ í˜ì´ì§€ í™•ì¸

---

## ğŸ“Š í˜„ì¬ ì§„í–‰ë¥ 

| ë‹¨ê³„ | ìƒíƒœ | ì§„í–‰ë¥  |
|------|------|--------|
| ë¡œì»¬ Git ì„¤ì • | âœ… ì™„ë£Œ | 100% |
| GitHub ì €ì¥ì†Œ | âœ… ì™„ë£Œ | 100% |
| GitHub ì¸ì¦ | âœ… ì™„ë£Œ | 100% |
| GitHub Secrets | âœ… ì™„ë£Œ | 100% |
| ì„œë²„ ì¤€ë¹„ | âœ… ê±°ì˜ ì™„ë£Œ | 90% |
| ìë™ ë°°í¬ í…ŒìŠ¤íŠ¸ | âŒ ë¯¸ì™„ë£Œ | 0% |

**ì „ì²´ ì§„í–‰ë¥ : ì•½ 85%**

---

## ğŸ¯ ì§€ê¸ˆ ë°”ë¡œ í•  ì¼

### 1. Nginx ì„¤ì • í™•ì¸ ë° ìˆ˜ì • (5ë¶„)

```bash
# í˜„ì¬ ì„¤ì • í™•ì¸
sudo cat /etc/nginx/sites-available/default | grep root

# rootê°€ /var/www/myapp/current/publicì´ ì•„ë‹ˆë¼ë©´ ìˆ˜ì •
sudo nano /etc/nginx/sites-available/default
# root /var/www/myapp/current/public; ë¡œ ë³€ê²½
sudo nginx -t
sudo systemctl reload nginx
```

### 2. SSH ê³µê°œí‚¤ ë“±ë¡ (10ë¶„)

- ìœˆë„ìš°ì—ì„œ ê³µê°œí‚¤ ë³µì‚¬
- ì„œë²„ì— ë“±ë¡

### 3. ë°°í¬ í…ŒìŠ¤íŠ¸ (5ë¶„)

- ì½”ë“œ í‘¸ì‹œ
- GitHub Actions í™•ì¸

---

**ì„œë²„ ì„¤ì •ì´ ê±°ì˜ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! Nginx ì„¤ì •ê³¼ SSH í‚¤ë§Œ í™•ì¸í•˜ë©´ ë°°í¬ í…ŒìŠ¤íŠ¸ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!** ğŸš€
